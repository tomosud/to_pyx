# 現在の実装仕様

**更新条件**: ゲームシステム・バランス・技術アーキテクチャの実装変更時

**最終更新**: 2025-06-22  
**フェーズ**: コアシステム完成（初回実装完了）  
**ルール**: このファイルは現在の実装に基づく最新仕様のみを記載します

## システム概要

Pyxelを使用した2D逆テトリスゲーム。テトリミノが画面下部から上に向かって移動する革新的なテトリスバリエーション。

### 基本ゲームフロー
1. **初期化**: ゲームウィンドウ（240x320）、ボード、テトリミノシステムの初期化
2. **メインループ**: 入力処理、逆方向物理更新（下→上移動）、衝突判定、描画処理を繰り返し
3. **ゲーム終了**: テトリミノがスポーン位置（下部）に到達不可でゲームオーバー

### 主要モジュール
1. **entry.py**: メインゲームファイル - ゲームループ、テトリミノ管理、ボード管理、UI表示の全システム
2. **index.html**: Web版実行用HTMLファイル
3. **run.bat**: Windows用一括セットアップ・実行スクリプト

### 設定ファイル・定数
1. **SCREEN_WIDTH**: 240 - ゲーム画面の幅
2. **SCREEN_HEIGHT**: 320 - ゲーム画面の高さ（通常テトリスより縦長）
3. **BOARD_WIDTH**: 10 - プレイフィールドの幅（セル数）
4. **BOARD_HEIGHT**: 20 - プレイフィールドの高さ（セル数）
5. **CELL_SIZE**: 12 - 各ブロックのピクセルサイズ
6. **FALL_SPEED**: 30フレーム - テトリミノの初期上昇速度
7. **BOARD_X**: 60 - ボード描画開始X座標
8. **BOARD_Y**: 20 - ボード描画開始Y座標

### ファイル構成詳細
- `entry.py` - メインゲームファイル（ReverseTetrisクラス）
- `index.html` - Web版実行用
- `run.bat` - Windows環境用実行スクリプト
- `README.md` - プレイヤー向けゲーム説明
- `DEVELOPMENT_ENTRY.md` - 開発状況管理
- `CURRENT_SPECIFICATIONS.md` - 本仕様書
- `DEVELOPMENT_HISTORY.md` - 開発履歴

## 現在のゲームバランス

- **初期落下速度**: 30フレーム/移動 - 適度な難易度でスタート
- **高速上昇**: ↓キー押下で5倍速 - プレイヤーの戦略的操作を支援
- **レベルアップ**: 10ライン消去毎 - 段階的な難易度上昇
- **速度上昇**: レベル毎に2フレーム短縮、最速5フレーム - 適度な難易度カーブ
- **スコアシステム**: ライン数 × 100 × レベル - シンプルで理解しやすい

## テトリミノ仕様

### 実装済み7種類
1. **I字**: 1x4直線ブロック（色：1番）
2. **O字**: 2x2正方形ブロック（色：2番）
3. **T字**: T型ブロック、4回転対応（色：3番）
4. **S字**: S型ブロック、2回転対応（色：4番）
5. **Z字**: Z型ブロック、2回転対応（色：5番）
6. **J字**: J型ブロック、4回転対応（色：6番）
7. **L字**: L型ブロック、4回転対応（色：7番）

### 特殊仕様
- **スポーン位置**: 画面下部（Y座標：BOARD_HEIGHT-1）
- **移動方向**: 下から上（通常テトリスの逆）
- **回転システム**: 各ピース種類に応じた回転パターン実装

## 操作・UI仕様

### 操作方法
- **←→キー**: 左右移動
- **↑キー**: 回転（時計回り）
- **↓キー**: 高速上昇（5倍速）
- **Rキー**: ゲームオーバー時のリスタート

### UI要素
- **メインボード**: 240x320ピクセル、10x20セルグリッド
- **ネクストピース表示**: 右上部、次のテトリミノプレビュー
- **スコア表示**: SCORE、LEVEL、LINES の3要素
- **操作説明**: 画面下部に常時表示
- **ゲームオーバー画面**: 中央ポップアップ、最終スコア表示

---

**注意**: 
- この仕様は現在の実装（コアシステム完成）に基づいています
- 過去の仕様や開発経緯は `DEVELOPMENT_HISTORY.md` を参照してください

**参考例**: [../pitfallgame/CURRENT_SPECIFICATIONS.md](../pitfallgame/CURRENT_SPECIFICATIONS.md)
- Pyxelゲームの実装例（Pitfallスタイルアクション）
- 実装中機能の仕様記録例
- 段階的開発での仕様管理方法
